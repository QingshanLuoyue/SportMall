/**
 *
 * 共用代码，提供常用事件、方法等
 * 详细用法请参考：http://v3.spice.lh/javascript/spice
 * 如果链接无法访问，请联系QQ：1515110755 或 RTX：hong.liang
 * 
 * @ author Razy
 * @ version 3.1.0
 *
 */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=b(a):a.spice=b(a)}(jQuery,function(a){function b(b,c,d,e){var f=d.type;d.type=c,e?a.event.trigger(d,void 0,b):a.event.dispatch.call(b,d),d.type=f}function c(a,b){for(var c=H.length,d="function"==typeof a.constructor?f:e;c--;){var g=H[c];("constructor"===g?w.has(a,g):g in a&&a[g]!==d[g]&&!w.contains(b,g))&&b.push(g)}}var d=Array.prototype,e=Object.prototype,f=Function.prototype,g=(d.push,d.slice),h=e.toString,i=e.hasOwnProperty,j=Array.isArray,k=Object.keys,l=f.bind,m=Object.create,n=navigator,o=n.userAgent,p=o.match(/(iPad).*OS\s([\d_]+)/),q=o.match(/(iPod).*OS\s([\d_]+)/i),r=".spice",s=!!o.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),t=/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/,u=/^(1[3-9]{1}[0-9]{1})\d{8}$/,g=Array.prototype.slice,v=a(window),w=function(){return this instanceof arguments.callee?void 0:new w};w.prototype={namespace:r,nav:n,ua:o,trident:o.indexOf("Trident")>-1,presto:o.indexOf("Presto")>-1,webKit:o.indexOf("AppleWebKit")>-1,gecko:o.indexOf("Gecko")>-1&&-1==o.indexOf("KHTML"),mobile:!!o.match(/AppleWebKit.*Mobile.*/),ios:!!o.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:o.indexOf("Android")>-1||o.indexOf("Adr")>-1,iPhone:!q&&!p&&o.match(/(iPhone\sOS)\s([\d_]+)/),iPad:p,iPod:q,webApp:-1==o.indexOf("Safari"),hasTouch:s,mouseenter:s?"touchend"+r+" touchcancel"+r:"mouseenter"+r,mouseleave:s?"touchend"+r+" touchcancel"+r:"mouseleave"+r,mousedown:s?"touchstart"+r:"mousedown"+r,mouseup:s?"touchend"+r+" touchcancel"+r:"mouseup"+r,mousemove:s?"touchmove"+r:"mousemove"+r,click:s?"touchend"+r+" touchcancel"+r:"click"+r,tap:"tap"+r};var w=w();w.getMaxZIndex=function(){return Math.max.apply(null,a("*",document.body).map(function(){return a(this).css("zIndex")>>>0}).get())},w.getEvent=function(a){return w.hasTouch?a.originalEvent.changedTouches:a},w.getEventXY=function(a){var b=w.getEvent(a);return{x:b.clientX?b.clientX:b[0]?b[0].pageX:0,y:b.clientY?b.clientY:b[0]?b[0].pageY:0}},w.getStringLength=function(a){for(var b,c=0,d=0,e=a.length;e>d;d++)b=a.charCodeAt(d),c+=b>127?2:1;return c},w.subString=function(b,c,d){var e,f=0,g=0,h="",i=b.length,j=w.getStringLength(b);for(0>c&&(c=j+c),0>d||"number"!=a.type(d)?d=~~d+j:d+=c;i>f&&!(g>=c);f++){var e=b.charCodeAt(f);g+=e>127?2:1}for(;i>f;f++){var e=b.charCodeAt(f);if(g+=e>127?2:1,g>d)break;h+=b.charAt(f)}return h},w.getURLParameter=function(a,b){var c=(b||window).location.search,d=new RegExp("[&?]+"+a+"=([^&]*)"),e="";return d.test(c)&&(e=RegExp.$1),e},w.visualArea=function(b,c){if(!b||!w.isString(b)||0==a(b).length)return!1;var d={callBack:null,num:0};d=a.extend({},d,c),v.off("scroll.spice.visualArea").on("scroll.spice.visualArea",function(){var c=a(this);c.scrollTop()+c.height()>a(b).offset().top-d.num&&d.callBack&&a.isFunction(d.callBack)&&d.callBack(a(b))}).trigger("scroll.spice.visualArea")},w.getScrollbarWidth=function(){if(w.android||a("body").height()<=v.height())return 0;var b,c,d=document.createElement("p"),e={width:"100px",height:"100px",overflowY:"scroll"};for(b in e)d.style[b]=e[b];return document.body.appendChild(d),c=d.offsetWidth-d.clientWidth,a(d).remove(),c},w.getWindowWidth=function(){return v.width()+w.getScrollbarWidth()},w.getTimestamp=function(){return(new Date).getTime().toString()},w.getCookie=function(a){var b=document.cookie,c=new RegExp(a+"=([^;]*)"),d="";return c.test(b)&&(d=RegExp.$1),d},w.getDates=function(a){var b=(a.length,{}),c=86400,d=0,e=a.match(/\d+\w/g);if(null==e)return!1;for(var f=0,g=e.length;g>f;f++)new RegExp("^(\\d+)([a-z]+)$","i").test(e[f]),b[RegExp.$2]=RegExp.$1;return b.s&&(d=+b.s),b.m&&(d+=60*+b.m),b.h&&(d+=60*+b.h*60),b.D&&(d+=+b.D*c),b.W&&(d+=+b.W*c*7),b.M&&(d+=+b.M*c*30),b.Y&&(d+=+b.Y*c*365),1e3*d},w.setCookie=function(a,b){var c=[];if("string"==typeof b)c=b;else if("object"==typeof b.values){for(var d in b.values)c.push(d+"="+b.values[d]+"&");c=c.join("").slice(0,-1)}else c=b.values;var e=a+"="+c;b.expires&&(e+=";expires="+new Date((new Date).getTime()+w.getDates(b.expires)).toGMTString()),b.path&&(e+=";path="+b.path),b.domain&&(e+=";domain="+b.domain),b.secure===!0&&(e+=";secure"),document.cookie=e},w.delCookie=function(a){var b=document.cookie,c=new RegExp(a+"=[^;]?");c.test(b)&&(document.cookie=a+"=;expires="+new Date(-1).toGMTString())},w.getTimeUrl=function(a){var b=w.getTimestamp();return a.indexOf("spiceflag=")>=0?a=a.replace(/spiceflag=\d{13}/,"spiceflag="+b):(a+=/\?/.test(a)?"&":"?",a+"spiceflag="+b)},w._ajaxSetValue=function(b,c,d){if(null!==d){var e=b[c];w.isString(e)?b[c]=[e,d]:a.isArray(e)?b[c].push(d):b[c]=d}},w._ajaxFieldValue=function(b){var c=null,d=(b.type||"").toLowerCase();return b.name&&d&&!b.disabled&&("radio"===d||"checkbox"===d?b.checked&&(c=b.value):b.multiple?(c=[],a("option",b).each(function(){this.selected&&c.push(this.value)})):c=b.value),c},w._ajaxFormToObj=function(b){if(!b)return{};b=w.isString(b)?a("#"+b).get(0):b;var c={},d="file|submit|image|reset|button|";return a.each(b.elements,function(a,b){var e=b.name,f=(b.type||"").toLowerCase();e&&f&&-1===d.indexOf(f)&&!b.disabled&&w._ajaxSetValue(c,e,w._ajaxFieldValue(b))}),c},w._ajaxOptions=function(b,c,d){var e={};return b=w.getTimeUrl(b),1===arguments.length?e=b:(e=d||{},e.url=b,c&&(w.isString(c)?a.extend(e,{data:w._ajaxFormToObj(c)}):a.extend(e,{data:c}))),e},w.asyncXhr=function(b,c,d){a.ajax(w._ajaxOptions(b,c,d))},w.asyncXhrGet=function(b,c,d){var e=w._ajaxOptions(b,c,d);e.type="GET",a.ajax(e)},w.asyncXhrPost=function(b,c,d){var e=w._ajaxOptions(b,c,d);e.type="POST",a.ajax(e)},w.syncXhr=function(b,c,d){var e,f=w._ajaxOptions(b,c,d);return a.extend(f,{async:!1,success:function(a,b){e=a},error:function(a,b,c){e={};var d={};d.message="Error occurs when fetching data from url:"+this.url,d.cause=b?b:c,e.exception=d}}),a.ajax(f),e},w.syncXhrGet=function(b,c,d){return 1===arguments.length?b.type="GET":d=a.extend({},d,{type:"GET"}),w.syncXhr(b,c,d)},w.syncXhrPost=function(b,c,d){return 1===arguments.length?b.type="POST":d=a.extend({},d,{type:"POST"}),w.syncXhr(b,c,d)},w.dialog=function(b){if(!b.type||2!=b.type)return w.Dialog(b);if(!(this instanceof arguments.callee))return new w.dialog(b);var c=this;c.opt=a.extend({},c.defaultOptions,b);c.init()},w.dialog.prototype={getTemplate:function(){var b=this,c=(b.opt.type,b.opt.title),d=b.opt.content,e=b.opt.buttons,f=a('<div class="dialog">                                <div class="dialog-container">                                    <div class="dialog-content"><div>'+(c?"<h4>"+c+"</h4>":"")+(d?"<p>"+d+"</p>":"")+'</div></div>                                </div>                                <i class="icon icon-close dialog-close">&times;</i>                            </div>');if(e&&a.isPlainObject(e)){var g=a('<div class="dialog-btn-wrap"></div>');a.each(e,function(c,d){var e=d.btnClass,f=d.btnEvent,h=d.btnElem,i=h||'<a class="btn'+(e?" "+e:"")+'"><span><i></i>'+(c||"")+"</span></a>";g.append(a(i).on("tap",{dialog:b},f&&a.isFunction(f)?f:function(){}))}),a(".dialog-content",f).after(g)}return f},defaultOptions:{template:"",dialogClass:"spice-dialog",fixed:!1,title:"",content:"",buttons:null,btnCloseClass:".dialog-close",maskClass:"spice-dialog-mask",maskClose:!0,showMask:!0,autoClose:!1,speed:500,isRemove:!0},_trigger:function(a,b){this.elem.triggerHandler(a,b)},init:function(b){var c=this,d=c.opt=a.extend({},c.opt,b);return c.destroy(),c.elem=c.createElem(d.template),a.each(["initEvent"],function(b,e){a.isFunction(d[e])&&c.elem.on(e,{dialog:c},d[e])}),c._trigger("initEvent",[a(c.elem)]),c.btnClose=a(d.btnCloseClass||".dialog-close",c.elem),d.showMask&&(c.elemMask=w.mask()),c.elemMask&&c.elemMask.elem.addClass(d.maskClass),c.activate(),a(c.elem).data("spice.dialog",c),c},activate:function(){var a=this;a.btnClose.on("tap",function(){a.hide()}),a.opt.maskClose&&a.elemMask&&a.elemMask.elem.on("tap",function(){a.hide()})},refreshPosition:function(a){var a=a||this.elem,b=a.css("zIndex"),c=a.css("display"),d=a.css("opacity");a.removeAttr("style");var e=a.outerWidth(!0),f=a.outerHeight(!0),g={marginTop:-f/2,marginLeft:-e/2,left:"50%",top:"50%",position:"fixed",zIndex:b,display:c,opacity:d};if(!this.opt.fixed){var h=v.scrollTop(),i=v.height();g.position="absolute",g.marginTop="",g.top=h+(i-f)/2}f>v.height()&&(g.marginTop=0,this.opt.fixed?g.top=10:g.top=h+10),a.css(g)},createElem:function(b){var c=this,d=c.opt,e=a(b||c.getTemplate()).addClass(d.dialogClass).hide().appendTo("body");return c.refreshPosition(e),e.css("zIndex",w.getMaxZIndex()+2),e},refreshZIndex:function(){return this.elem.css("zIndex",w.getMaxZIndex()+1),this},show:function(a,b){var c=this,d=c.opt;c.refreshPosition(this.elem),c.elem.fadeTo(d.speed||b||0,1,a),c.elemMask&&c.elemMask.show(),c.elem.css("zIndex",w.getMaxZIndex()+2);var e=c.opt.autoClose;return w.isNumber(e)&&setTimeout(function(){c.hide(function(){d.isRemove&&c.destroy()})},e),c},hide:function(a,b){var c=this,d=c.opt;return c.elem.fadeOut(d.speed||b||0,a),c.elemMask&&c.elemMask.hide(),c},destroy:function(){return this.elem&&this.elem.remove(),this.elemMask&&this.elemMask.remove(),this}},w.mask=function(b){if(!(this instanceof arguments.callee))return new w.mask(b);var c=this;c.opt=a.extend({},c.defaultOptions,b),c.elem=c.createElem(),a(c.elem).data("spice.mask",c)},w.mask.prototype={defaultOptions:{maskClass:"",appendTo:"",speed:500},createElem:function(){return a("<div>",{"class":"spice-black-opacity"+(this.opt.maskClass?" "+this.opt.maskClass:"")}).css("zIndex",w.getMaxZIndex()+2).appendTo(this.opt.appendTo||"body")},show:function(a,b){return this.elem.fadeTo(this.opt.speed||b||0,.5,a),this},hide:function(a,b){return this.elem.fadeOut(this.opt.speed||b||0,a),this},setZIndex:function(a){return this.elem.css("zIndex",a),this},refreshZIndex:function(){return this.elem.css("zIndex",w.getMaxZIndex()-1),this},remove:function(){return this.elem.remove(),this}};var x=-1;w._initScroll=function(a){w._removeScroll(a,function(b){!w.android&&w.hasTouch&&a.data("iScroll",new IScroll("#"+b,{preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|A)$/}}))})},w._removeScroll=function(a,b){var c=a.attr("id");if(window.IScroll&&c){var d=a.data("iScroll");d&&d.destroy(),b&&b(c)}},w._refreshScroll=function(a){var b=a.attr("id");if(window.IScroll&&b){var c=a.data("iScroll");c&&c.refresh()}},w.Dialog=function(b){if(!(this instanceof arguments.callee))return new w.Dialog(b);var c=this;c.opt=a.extend({},c.defaultOptions,b);c.init()},w.Dialog.prototype={getTemplate:function(b){var c=this,d=c.opt,e=(d.type,d.title),f=d.content,g=d.showMask,h=c.opt.buttons,i=a('<div class="dialog-opacity'+(g?"":" dialog-opacity-transparent")+'" id="spice-dialog-'+ ++x+'">                                    <div class="dialog-scroll-wrap">                                        <div class="dialog-scroll-container">                                            <div class="dialog-scroll">                                                <div>'+(b||'<div class="dialog">                                                        <div class="dialog-container">                                                            <div class="dialog-content"><div>'+(e?"<h4>"+e+"</h4>":"")+(f?"<p>"+f+"</p>":"")+'</div></div>                                                        </div>                                                        <i class="icon icon-close dialog-close">&times;</i>                                                    </div>')+"</div>                                            </div>                                        </div>                                    </div>                                </div>");if(h&&a.isPlainObject(h)){var j=a('<div class="dialog-btn-wrap"></div>');a.each(h,function(b,d){var e=d.btnClass,f=d.btnEvent,g=d.btnElem,h=g||'<a class="btn'+(e?" "+e:"")+'"><span><i></i>'+(b||"")+"</span></a>";j.append(a(h).on("tap",{dialog:c},f&&a.isFunction(f)?f:function(){}))}),a(".dialog-content",i).after(j)}return i},defaultOptions:{template:"",dialogClass:"spice-dialog",title:"",content:"",buttons:null,btnCloseClass:".dialog-close",maskClose:!0,showMask:!0,autoClose:!1,speed:500,isRemove:!0},_trigger:function(a,b){this.elem.triggerHandler(a,b)},init:function(b){var c=this,d=c.opt=a.extend({},c.opt,b);return c.destroy(),c.elem=c.createElem(d.template),a.each(["initEvent"],function(b,e){a.isFunction(d[e])&&c.elem.on(e,{dialog:c},d[e])}),c._trigger("initEvent",[a(c.elem)]),c.btnClose=a(d.btnCloseClass||".dialog-close",c.elem),c.activate(),a(c.elem).data("spice.dialog",c),c},activate:function(){var b=this;b.btnClose.on("tap",function(){b.hide()}),b.opt.maskClose&&b.elem.on("tap",function(c){var d=a(c.target);0==d.closest(".dialog").length&&b.hide()})},createElem:function(b){var c=this,d=c.opt,e=a(c.getTemplate(b)).addClass(d.dialogClass).hide().appendTo("body");return e.css("zIndex",w.getMaxZIndex()+1),e},refreshZIndex:function(){return this.elem.css("zIndex",w.getMaxZIndex()+1),this},show:function(b,c){a("body, html").addClass("overflow-hidden");var d=this,e=d.opt,f=d.elem;f.fadeTo(d.opt.speed||c||0,1,function(){b&&a.isFunction(b)&&b(),w._initScroll(f)});var g=d.opt.autoClose;return w.isNumber(g)&&setTimeout(function(){d.hide(function(){e.isRemove&&d.destroy()})},g),d},hide:function(b,c){var d=this;return a("body, html").removeClass("overflow-hidden"),d.elem.fadeOut(d.opt.speed||c||0,b),d},destroy:function(){var a=this.elem;return a&&0!=a.length&&(w._removeScroll(a),a.remove()),this}},w.checkEmail=function(a,b){try{return(b||t).test(a)}catch(c){return!1}},w.checkMobile=function(a,b){try{return(b||u).test(a)}catch(c){return!1}},a.each("tap".split(" "),function(b,c){a.fn[c]=function(a){return a?this.on(c,a):this.trigger(c)},a.attrFn&&(a.attrFn[c]=!0)}),a.event.special.tap={setup:function(c,d,e){function f(){return{sx:0,sy:0,ex:0,ey:0}}var g=f(),h=a(this);w.hasTouch&&!w.android?h.on(w.mousedown,function(a){var b=w.getEventXY(a);g.sx=b.x,g.sy=b.y}).on(w.click,function(a){var c=w.getEventXY(a);g.ex=c.x,g.ey=c.y,g.sx==g.ex&&g.sy==g.ey&&(b(h[0],"tap",a),g=f())}):h.on("click",function(a){b(h[0],"tap",a)})},teardown:function(b){a(this).off("click").off(w.mousedown)}};var y=function(){},z=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},A=function(a,b,c){return null==a?w.identity:w.isFunction(a)?z(a,b,c):w.isObject(a)?w.matches(a):w.property(a)};w.iteratee=function(a,b){return A(a,b,1/0)};var B=function(a){return function(b){var c=arguments.length;if(2>c||null==b)return b;for(var d=0;c>d;d++)for(var e=arguments[d],f=a(e),g=f.length,h=0;g>h;h++){var i=f[h];b[i]=e[i]}return b}},C=function(a){if(!w.isObject(a))return{};if(m)return m(a);y.prototype=a;var b=new y;return y.prototype=null,b};w.each=w.forEach=function(a,b,c){if(null==a)return a;b=z(b,c);var d,e=a.length;if(e===+e)for(d=0;e>d;d++)b(a[d],d,a);else{var f=w.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},w.map=w.collect=function(a,b,c){if(null==a)return[];b=A(b,c);for(var d,e=a.length!==+a.length&&w.keys(a),f=(e||a).length,g=Array(f),h=0;f>h;h++)d=e?e[h]:h,g[h]=b(a[d],d,a);return g},w.reduce=w.foldl=w.inject=function(a,b,c,d){null==a&&(a=[]),b=z(b,d,4);var e,f=a.length!==+a.length&&w.keys(a),g=(f||a).length,h=0;for(arguments.length<3&&(c=a[f?f[h++]:h++]);g>h;h++)e=f?f[h]:h,c=b(c,a[e],e,a);return c},w.reduceRight=w.foldr=function(a,b,c,d){null==a&&(a=[]),b=z(b,d,4);var e,f=a.length!==+a.length&&w.keys(a),g=(f||a).length;for(arguments.length<3&&(c=a[f?f[--g]:--g]);g-->0;)e=f?f[g]:g,c=b(c,a[e],e,a);return c},w.transform=function(a,b,c,d){if(null==c)if(w.isArray(a))c=[];else if(w.isObject(a)){var e=a.constructor;c=C("function"==typeof e&&e.prototype)}else c={};if(null==a)return c;b=z(b,d,4);var f,g,h=a.length!==+a.length&&w.keys(a),i=(h||a).length;for(f=0;i>f&&(g=h?h[f]:f,b(c,a[g],g,a)!==!1);f++);return c},w.find=w.detect=function(a,b,c){var d;return d=a.length===+a.length?w.findIndex(a,b,c):w.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},w.filter=w.select=function(a,b,c){var d=[];return null==a?d:(b=A(b,c),w.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d)},w.reject=function(a,b,c){return w.filter(a,w.negate(A(b)),c)},w.every=w.all=function(a,b,c){if(null==a)return!0;b=A(b,c);var d,e,f=a.length!==+a.length&&w.keys(a),g=(f||a).length;for(d=0;g>d;d++)if(e=f?f[d]:d,!b(a[e],e,a))return!1;return!0},w.some=w.any=function(a,b,c){if(null==a)return!1;b=A(b,c);var d,e,f=a.length!==+a.length&&w.keys(a),g=(f||a).length;for(d=0;g>d;d++)if(e=f?f[d]:d,b(a[e],e,a))return!0;return!1},w.contains=w.includes=w.include=function(a,b,c){return null==a?!1:(a.length!==+a.length&&(a=w.values(a)),w.indexOf(a,b,"number"==typeof c&&c)>=0)},w.invoke=function(a,b){var c=g.call(arguments,2),d=w.isFunction(b);return w.map(a,function(a){return(d?b:a[b]).apply(a,c)})},w.pluck=function(a,b){return w.map(a,w.property(b))},w.where=function(a,b){return w.filter(a,w.matches(b))},w.findWhere=function(a,b){return w.find(a,w.matches(b))},w.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=a.length===+a.length?a:w.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=A(b,c),w.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},w.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=a.length===+a.length?a:w.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=A(b,c),w.each(a,function(a,c,d){e=b(a,c,d),(g>e||e===1/0&&f===1/0)&&(f=a,g=e)});return f},w.shuffle=function(a){for(var b,c=a&&a.length===+a.length?a:w.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=w.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},w.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=w.values(a)),a[w.random(a.length-1)]):w.shuffle(a).slice(0,Math.max(0,b))},w.sortBy=function(a,b,c){return b=A(b,c),w.pluck(w.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){return w.comparator(a.criteria,b.criteria)||a.index-b.index}),"value")};var D=function(a){return function(b,c,d){var e={};return c=A(c,d),w.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};w.groupBy=D(function(a,b,c){w.has(a,c)?a[c].push(b):a[c]=[b]}),w.indexBy=D(function(a,b,c){a[c]=b}),w.countBy=D(function(a,b,c){w.has(a,c)?a[c]++:a[c]=1}),w.toArray=function(a){return a?w.isArray(a)?g.call(a):a.length===+a.length?w.map(a,w.identity):w.values(a):[]},w.size=function(a){return null==a?0:a.length===+a.length?a.length:w.keys(a).length},w.partition=function(a,b,c){b=A(b,c);var d=[],e=[];return w.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},w.first=w.head=w.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:w.initial(a,a.length-b)},w.initial=function(a,b,c){return g.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},w.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:w.rest(a,Math.max(0,a.length-b))},w.rest=w.tail=w.drop=function(a,b,c){return g.call(a,null==b||c?1:b)},w.compact=function(b){return a.grep(b,function(b,c){return a.isPlainObject(b)&&a.isEmptyObject(b)?!1:a.isArray(b)&&0==b.length?!1:b})};var E=function(a,b,c,d){for(var e,f=[],g=0,h=d||0,i=a&&a.length;i>h;h++)if(e=a[h],e&&e.length>=0&&(w.isArray(e)||w.isArguments(e))){b||(e=E(e,b,c));var j=0,k=e.length;for(f.length+=k;k>j;)f[g++]=e[j++]}else c||(f[g++]=e);return f};w.flatten=function(a,b){return E(a,b,!1)},w.without=function(a){return w.difference(a,g.call(arguments,1))},w.uniq=w.unique=function(a,b,c,d){if(null==a)return[];w.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=A(c,d));for(var e=[],f=[],g=0,h=a.length;h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?w.contains(f,j)||(f.push(j),e.push(i)):w.contains(e,i)||e.push(i)}return e},w.union=function(){return w.uniq(E(arguments,!0,!0))},w.intersection=function(a){if(null==a)return[];for(var b=[],c=arguments.length,d=0,e=a.length;e>d;d++){var f=a[d];if(!w.contains(b,f)){for(var g=1;c>g&&w.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},w.difference=function(a){var b=E(arguments,!0,!0,1);return w.filter(a,function(a){return!w.contains(b,a)})},w.zip=function(a){if(null==a)return[];for(var b=w.max(arguments,"length").length,c=Array(b);b-->0;)c[b]=w.pluck(arguments,b);return c},w.unzip=function(a){return w.zip.apply(null,a)},w.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},w.indexOf=function(a,b,c){var d=0,e=a&&a.length;if("number"==typeof c)d=0>c?Math.max(0,e+c):c;else if(c&&e)return d=w.sortedIndex(a,b),a[d]===b?d:-1;for(;e>d;d++)if(a[d]===b)return d;return-1},w.lastIndexOf=function(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=0>c?d+c+1:Math.min(d,c+1));--d>=0;)if(a[d]===b)return d;return-1},w.findIndex=function(a,b,c){b=A(b,c);for(var d=null!=a?a.length:0,e=0;d>e;e++)if(b(a[e],e,a))return e;return-1},w.sortedIndex=function(a,b,c,d){c=A(c,d,1);for(var e=c(b),f=0,g=a.length;g>f;){var h=Math.floor((f+g)/2);w.comparator(c(a[h]),e)<0?f=h+1:g=h}return f},w.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var F=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=C(a.prototype),g=a.apply(f,e);return w.isObject(g)?g:f};w.bind=function(a,b){if(l&&a.bind===l)return l.apply(a,g.call(arguments,1));if(!w.isFunction(a))throw new TypeError("Bind must be called on a function");var c=g.call(arguments,2);return function d(){return F(a,d,b,this,c.concat(g.call(arguments)))}},w.partial=function(a){var b=g.call(arguments,1);return function c(){for(var d=0,e=b.slice(),f=0,g=e.length;g>f;f++)e[f]===w&&(e[f]=arguments[d++]);for(;d<arguments.length;)e.push(arguments[d++]);return F(a,c,this,this,e)}},w.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=w.bind(a[c],a);return a},w.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return w.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},w.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},w.defer=w.partial(w.delay,w,1),w.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:w.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=w.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},w.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=w.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=w.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},w.wrap=function(a,b){return w.partial(b,a)},w.negate=function(a){return function(){return!a.apply(this,arguments)}},w.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},w.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},w.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},w.once=w.partial(w.before,2);var G=!{toString:null}.propertyIsEnumerable("toString"),H=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];w.keys=function(a){if(!w.isObject(a))return[];if(k)return k(a);var b=[];for(var c in a)w.has(a,c)&&b.push(c);return b},w.keysIn=function(a){if(!w.isObject(a))return[];var b=[];for(var d in a)b.push(d);return G&&c(a,b),b},w.values=function(a){for(var b=w.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},w.pairs=function(a){for(var b=w.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},w.invert=function(a){for(var b={},c=w.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},w.functions=w.methods=function(a){var b=[];for(var c in a)w.isFunction(a[c])&&b.push(c);return b.sort()},w.extend=B(w.keysIn),w.assign=B(w.keys),w.findKey=function(a,b,c){b=A(b,c);for(var d,e=w.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},w.pick=function(a,b,c){var d,e={};if(null==a)return e;if(w.isFunction(b)){b=z(b,c);for(d in a){var f=a[d];b(f,d,a)&&(e[d]=f)}}else{var g=E(arguments,!1,!1,1);a=new Object(a);for(var h=0,i=g.length;i>h;h++)d=g[h],d in a&&(e[d]=a[d])}return e},w.omit=function(a,b,c){if(w.isFunction(b))b=w.negate(b);else{var d=w.map(E(arguments,!1,!1,1),String);b=function(a,b){return!w.contains(d,b)}}return w.pick(a,b,c)},w.defaults=function(a){if(!w.isObject(a))return a;for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b];for(var e in d)void 0===a[e]&&(a[e]=d[e])}return a},w.create=function(a,b){var c=C(a);return b&&w.assign(c,b),c},w.clone=function(a){return w.isObject(a)?w.isArray(a)?a.slice():w.extend({},a):a};var I=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;var e=h.call(a);if(e!==h.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,i=b.constructor;if(g!==i&&!(w.isFunction(g)&&g instanceof g&&w.isFunction(i)&&i instanceof i)&&"constructor"in a&&"constructor"in b)return!1}for(var j=c.length;j--;)if(c[j]===a)return d[j]===b;if(c.push(a),d.push(b),f){if(j=a.length,j!==b.length)return!1;for(;j--;)if(!I(a[j],b[j],c,d))return!1}else{var k,l=w.keys(a);if(j=l.length,w.keys(b).length!==j)return!1;for(;j--;)if(k=l[j],!w.has(b,k)||!I(a[k],b[k],c,d))return!1}return c.pop(),d.pop(),!0};w.isEqual=function(a,b){return I(a,b,[],[])},w.isEmpty=function(a){if(null==a)return!0;if(w.isArray(a)||w.isString(a)||w.isArguments(a))return 0===a.length;for(var b in a)if(w.has(a,b))return!1;return!0},w.isElement=function(a){return!(!a||1!==a.nodeType)},w.isArray=j||function(a){return"[object Array]"===h.call(a)},w.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},w.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){w["is"+a]=function(b){return h.call(b)==="[object "+a+"]"}}),w.isArguments(arguments)||(w.isArguments=function(a){return w.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(w.isFunction=function(a){return"function"==typeof a||!1}),w.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},w.isNaN=function(a){return w.isNumber(a)&&a!==+a},w.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===h.call(a)},w.isNull=function(a){return null===a},w.isUndefined=function(a){return void 0===a},w.has=function(a,b){return null!=a&&i.call(a,b)},w.identity=function(a){return a},w.constant=function(a){return function(){return a}},w.noop=function(){},w.property=function(a){return function(b){return null==b?void 0:b[a]}},w.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},w.matches=function(a){var b=w.pairs(a),c=b.length;return function(a){if(null==a)return!c;a=new Object(a);for(var d=0;c>d;d++){var e=b[d],f=e[0];if(e[1]!==a[f]||!(f in a))return!1}return!0}},w.comparator=function(a,b){if(a===b)return 0;var c=a>=a,d=b>=b;if(c||d){if(c&&!d)return-1;if(d&&!c)return 1}return a>b?1:b>a?-1:0},w.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},w.now=Date.now||function(){return(new Date).getTime()};var J={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},K=w.invert(J),L=function(a){var b=function(b){return a[b]},c="(?:"+w.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};w.escape=L(J),w.unescape=L(K),w.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),w.isFunction(d)?d.call(a):d};var M=0;w.uniqueId=function(a){var b=++M+"";return a?a+b:b},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(a){return"\\"+O[a]};w.template=function(a,b,c){!b&&c&&(b=c),b=w.defaults({},b,w.templateSettings);var d=RegExp([(b.escape||N).source,(b.interpolate||N).source,(b.evaluate||N).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(P,Q),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':spice.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","spice",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,w)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},w.chain=function(a){var b=w(a);return b._chain=!0,b},w.config={throttleTime:100,debounceTime:300,resize:{standard:1024,medium:768,small:767}},w.resizeScreenDebounce=function(b){var c=a.extend({},w.config,{isRetinaCheck:!0,callBack:null},b),b=c.resize,d=w.sortBy(b),e=w.invert(b);return w.debounce(function(){var b,f=w.getWindowWidth();a.each(d,function(a,c){0===a&&c>=f&&(b=e[c]),d[a+1]?f<=d[a+1]&&f>=c&&(b=e[c]):f>c&&(b=e[c])}),c.isRetinaCheck&&window.devicePixelRatio>1&&(b+="_retina"),c.callBack&&a.isFunction(c.callBack)&&c.callBack(b)},c.debounceTime)};var R;return w.init=function(b){if(w.config=a.extend({},w.config,b),!R){var c=[];a.each(w.config.resize,function(a,b){c.push("events-spice-"+a+" style-spice-"+a)}),c=c.join(" "),R=w.resizeScreenDebounce({isRetinaCheck:!1,callBack:function(b){var d="events-spice-"+b+" style-spice-"+b;a("body").removeClass(c).addClass(d)}})}a(window).off("resize.spice.screen").on("resize.spice.screen",R).trigger("resize.spice.screen")},w}),function(){for(var a,b=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],c=b.length,d=window.console=window.console||{};c--;)a=b[c],d[a]||(d[a]=$.noop)}();